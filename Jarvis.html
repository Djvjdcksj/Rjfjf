<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jarvis Voice Assistant</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #121212;
            color: white;
            padding: 20px;
            margin: 0;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        button {
            background-color: #1DB954;
            color: white;
            padding: 15px 30px;
            border: none;
            font-size: 18px;
            cursor: pointer;
            border-radius: 25px;
            margin: 10px;
            transition: all 0.3s ease;
        }
        button:hover {
            background-color: #17a847;
            transform: scale(1.05);
        }
        button.listening {
            background-color: #ff4444;
            animation: pulse 1s infinite;
        }
        .output {
            margin: 20px 0;
            font-size: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        .examples {
            color: #888;
            font-size: 16px;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Jarvis Voice Assistant</h1>
        <button id="voiceBtn" onclick="toggleListening()">ðŸŽ¤ Tap to Speak</button>
        <p class="output" id="output">Waiting for command...</p>
        <p class="examples">Try: "What's the time now", "What's the day", "What's the date", "Set reminder [text]", "What is my reminder", "Search for funny cat videos", "Who is Elon Musk", "Play song [song name]"</p>
    </div>

    <script>
        let isListening = false;
        let recognition;
        const output = document.getElementById('output');
        const voiceBtn = document.getElementById('voiceBtn');

        function toggleListening() {
            if (!('webkitSpeechRecognition' in window || 'SpeechRecognition' in window)) {
                alert("Your browser does not support voice recognition. Try using Chrome.");
                return;
            }

            if (!isListening) {
                recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
                recognition.lang = "en-US";
                recognition.continuous = false;
                recognition.interimResults = false;

                recognition.onstart = () => {
                    isListening = true;
                    voiceBtn.classList.add('listening');
                    voiceBtn.textContent = 'ðŸŽ¤ Listening...';
                    output.textContent = 'Listening...';
                };

                recognition.onresult = (event) => {
                    const command = event.results[0][0].transcript.toLowerCase();
                    console.log("Recognized command:", command);
                    output.textContent = `You said: ${command}`;
                    handleCommand(command);
                };

                recognition.onerror = (event) => {
                    output.textContent = `Error: ${event.error}. Try again.`;
                    stopListening();
                };

                recognition.onend = stopListening;
                recognition.start();
            } else {
                stopListening();
            }
        }

        function stopListening() {
            if (recognition) {
                recognition.stop();
            }
            isListening = false;
            voiceBtn.classList.remove('listening');
            voiceBtn.textContent = 'ðŸŽ¤ Tap to Speak';
        }

        async function handleCommand(command) {
            try {
                if (command.includes("time")) {
                    const now = new Date();
                    const hours = now.getHours() % 12 || 12;
                    const minutes = now.getMinutes().toString().padStart(2, '0');
                    const period = now.getHours() >= 12 ? "PM" : "AM";
                    const responseText = `The time is ${hours}:${minutes} ${period}`;
                    await speak(responseText);
                    return;
                }

                if (command.includes("day")) {
                    const days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
                    const now = new Date();
                    const day = days[now.getDay()];
                    await speak(`Today is ${day}`);
                    return;
                }

                if (command.includes("search for")) {
                    const query = command.replace("search for", "").trim();
                    const searchUrl = `https://www.google.com/search?q=${encodeURIComponent(query)}`;
                    window.open(searchUrl, "_blank");
                    await speak(`Searching for ${query}`);
                    return;
                }

                if (command.includes("who is ")) {
                    const person = command.replace("who is ", "").trim();
                    const response = await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(person)}`);
                    const data = await response.json();
                    await speak(data.extract || "Sorry, no information available");
                    return;
                }

                if (command.includes("play song") || command.includes("sing")) {
                    const song = command.replace("play song", "").replace("sing", "").trim();
                    if (song) {
                        const searchUrl = `https://www.youtube.com/results?search_query=${encodeURIComponent(song)}`;
                        window.open(searchUrl, "_blank");
                        await speak(`Playing ${song}`);
                    } else {
                        await speak("Please specify a song name.");
                    }
                    return;
                }

                if (command.includes("set reminder")) {
                    const reminder = command.replace("set reminder", "").trim();
                    localStorage.setItem("reminder", reminder);
                    await speak(`Reminder set: ${reminder}`);
                    return;
                }

                if (command.includes("what is my reminder")) {
                    const reminder = localStorage.getItem("reminder");
                    await speak(`Your reminder is: ${reminder || "No reminder set"}`);
                    return;
                }

                await speak("I didn't understand that.");
            } catch (error) {
                console.error("Error:", error);
                await speak("An error occurred.");
            }
            stopListening();
        }

        function speak(text) {
            output.textContent = text;

            return new Promise((resolve) => {
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.onend = resolve;
                    utterance.onerror = resolve;
                    speechSynthesis.speak(utterance);
                } else {
                    alert("Your browser does not support speech synthesis.");
                    resolve();
                }
            });
        }

        window.onload = () => {
            speak("I am Jarvis, your personal assistant.");
        };
    </script>
</body>
  </html>
